<div class="clearfix margin-bottom">
  <h2 class="pull-left">Events</h2>

  <a href="{{ WMP.config.eventApp }}/add" class="btn btn-primary pull-right margin-top" target="_blank">+ Add an event</a>
</div>

<wmp-spinner
  wmp-spinner-data-failed="didServiceFail"
  wmp-spinner-delay="500"
  wmp-spinner-data="events"
  wmp-spinner-timeout="5000">
</wmp-spinner>

<table class="table table-striped events">
  <tbody ng-repeat="event in events">
    <tr ng-show="isDiffYear($index)">
      <th colspan="2">
        {{ event.beginDate| date: 'y' }}
      </th>
    </tr>
    <tr>
      <td class="event-date-time">
        <div class="event-time">
          <time datetime="{{ event.beginDate }}">
            {{ event.beginDate | date:'MMM d' }}
          </time>
        </div>
      </td>
      <td class="event-title-location">
        <h2>
          <a href="{{ WMP.config.eventApp }}/events/{{event.id}}" target="_blank" class="event-title">{{ event.title }}</a>
          <span>({{ event.address}})</span>
        </h2>
      </td>
    </tr>
  </tbody>
</table>
